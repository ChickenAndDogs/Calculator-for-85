<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공학용 도구 허브 (Engineering Tools Hub)</title>
    <link rel="stylesheet" href="style.css">
    <!-- KaTeX 라이브러리 추가 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
</head>
<body>
    <!-- 메인 네비게이션 허브 -->
    <div id="main-hub" class="container">
        <h1>공학용 도구 허브</h1>
        <p class="description">사용할 도구를 선택해 주세요.</p>
        
        <div class="tools-grid">
            <button class="tool-card" onclick="showCalculator('dbm-combined-calc')">
                <span class="tool-icon">⚡</span>
                <span class="tool-name">dBm ↔ 전력/전압</span>
                <span class="tool-desc">dBm, Watt, Vrms 등 통합 변환</span>
            </button>

            <button class="tool-card" onclick="showCalculator('resistor-calc')">
                <span class="tool-icon">🔌</span>
                <span class="tool-name">Decade Resistor 체크</span>
                <span class="tool-desc">이중 저항 합산 및 과전류 판정</span>
            </button>

            <button class="tool-card" onclick="showCalculator('interpolation-calc')">
                <span class="tool-icon">📈</span>
                <span class="tool-name">보간법 (Interpolation)</span>
                <span class="tool-desc">선형 데이터 보간 및 그래프 시각화</span>
            </button>

            <button class="tool-card" onclick="showCalculator('db-calc')">
                <span class="tool-icon">🔊</span>
                <span class="tool-name">dB 계산기 (Gain/Loss)</span>
                <span class="tool-desc">전압비(20log) 및 전력비(10log)</span>
            </button>

            <button class="tool-card" onclick="showCalculator('error-calc')">
                <span class="tool-icon">⚖️</span>
                <span class="tool-name">오차율 계산기</span>
                <span class="tool-desc">측정값 대비 오차 분석</span>
            </button>

            <button class="tool-card" onclick="showCalculator('tsl-calc')">
                <span class="tool-icon">📋</span>
                <span class="tool-name">TSL 체크</span>
                <span class="tool-desc">특정 절차 판정 (nano/micro 단위)</span>
            </button>
        </div>
    </div>

    <!-- 통합 dBm 계산기 -->
    <div id="dbm-combined-calc" class="container" style="display: none;">
        <div class="nav-header"><button class="back-btn" onclick="showHub()">← 메인으로 돌아가기</button></div>
        <h1>dBm ↔ 전력/전압 통합 변환기</h1>
        
        <div class="calculator-grid">
            <!-- 전력 섹션 -->
            <div class="input-group"><label>dBm</label><input type="number" id="c-dbm" step="any"></div>
            <div class="input-group"><label>Watts (W)</label><input type="number" id="c-watt" step="any"></div>
            <div class="input-group"><label>Milliwatts (mW)</label><input type="number" id="c-mwatt" step="any"></div>
            
            <!-- 전압 섹션 -->
            <div class="input-group"><label>Vpp (Peak-to-Peak)</label><input type="number" id="c-vpp" step="1"></div>
            <div class="input-group"><label>Vp (Peak)</label><input type="number" id="c-vp" step="any"></div>
            <div class="input-group"><label>Vrms (Root Mean Square)</label><input type="number" id="c-vrms" step="any"></div>
            
            <!-- 임피던스 -->
            <div class="input-group"><label>Z (Impedance Ω)</label>
                <select id="c-impedance">
                    <option value="50" selected>50 Ω</option>
                    <option value="150">150 Ω</option>
                    <option value="600">600 Ω</option>
                </select>
            </div>
        </div>
        <button id="reset-combined" class="danger-btn">전체 초기화</button>
    </div>

    <!-- 2. Decade Resistor 계산기 -->
    <div id="resistor-calc" class="container" style="display: none;">
        <div class="nav-header"><button class="back-btn" onclick="showHub()">← 메인으로 돌아가기</button></div>
        <h1>Decade Resistor 체크</h1>
        <div class="resistor-section">
            <h3>저항 1 (Resistor 1)</h3>
            <div class="calculator-grid">
                <div class="input-group"><label>Range Ω</label>
                    <div class="preset-buttons"><button class="r1-range-btn" onclick="setR1Range(1)">1</button><button class="r1-range-btn" onclick="setR1Range(10)">10</button><button class="r1-range-btn" onclick="setR1Range(100)">100</button><button class="r1-range-btn" onclick="setR1Range(1000)">1k</button><button class="r1-range-btn" onclick="setR1Range(10000)">10k</button><button class="r1-range-btn" onclick="setR1Range(100000)">100k</button><button class="r1-range-btn" onclick="setR1Range(1000000)">1M</button><button class="r1-range-btn" onclick="setR1Range(10000000)">10M</button></div>
                </div>
                <div class="input-group"><label>Digit 0-10</label>
                    <div class="preset-buttons digit-grid"><button class="r1-digit-btn" onclick="setR1Digit(0)">0</button><button class="r1-digit-btn" onclick="setR1Digit(1)">1</button><button class="r1-digit-btn" onclick="setR1Digit(2)">2</button><button class="r1-digit-btn" onclick="setR1Digit(3)">3</button><button class="r1-digit-btn" onclick="setR1Digit(4)">4</button><button class="r1-digit-btn" onclick="setR1Digit(5)">5</button><button class="r1-digit-btn" onclick="setR1Digit(6)">6</button><button class="r1-digit-btn" onclick="setR1Digit(7)">7</button><button class="r1-digit-btn" onclick="setR1Digit(8)">8</button><button class="r1-digit-btn" onclick="setR1Digit(9)">9</button><button class="r1-digit-btn" onclick="setR1Digit(10)">10</button></div>
                </div>
                <div class="input-group"><label for="res1-spec-i">Max 전류 (mA)</label><input type="number" id="res1-spec-i" step="any"></div>
            </div>
        </div>
        <div class="resistor-section">
            <h3>저항 2 (Resistor 2)</h3>
            <div class="calculator-grid">
                <div class="input-group"><label>Range Ω</label>
                    <div class="preset-buttons"><button class="r2-range-btn" onclick="setR2Range(1)">1</button><button class="r2-range-btn" onclick="setR2Range(10)">10</button><button class="r2-range-btn" onclick="setR2Range(100)">100</button><button class="r2-range-btn" onclick="setR2Range(1000)">1k</button><button class="r2-range-btn" onclick="setR2Range(10000)">10k</button><button class="r2-range-btn" onclick="setR2Range(100000)">100k</button><button class="r2-range-btn" onclick="setR2Range(1000000)">1M</button><button class="r2-range-btn" onclick="setR2Range(10000000)">10M</button></div>
                </div>
                <div class="input-group"><label>Digit 0-10</label>
                    <div class="preset-buttons digit-grid"><button class="r2-digit-btn" onclick="setR2Digit(0)">0</button><button class="r2-digit-btn" onclick="setR2Digit(1)">1</button><button class="r2-digit-btn" onclick="setR2Digit(2)">2</button><button class="r2-digit-btn" onclick="setR2Digit(3)">3</button><button class="r2-digit-btn" onclick="setR2Digit(4)">4</button><button class="r2-digit-btn" onclick="setR2Digit(5)">5</button><button class="r2-digit-btn" onclick="setR2Digit(6)">6</button><button class="r2-digit-btn" onclick="setR2Digit(7)">7</button><button class="r2-digit-btn" onclick="setR2Digit(8)">8</button><button class="r2-digit-btn" onclick="setR2Digit(9)">9</button><button class="r2-digit-btn" onclick="setR2Digit(10)">10</button></div>
                </div>
                <div class="input-group"><label for="res2-spec-i">Max 전류 (mA)</label><input type="number" id="res2-spec-i" step="any"></div>
            </div>
        </div>
        <div class="calculator-grid">
            <div class="input-group" style="grid-column: span 2;"><label for="res-vrms">사용 전압 (Vrms)</label><input type="number" id="res-vrms" step="any"></div>
        </div>
        <div class="result-box">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div><p>합계 저항값: <br><strong><span id="res-total-val">0</span> Ω</strong></p><p>현재 전류: <br><strong><span id="res-i-actual">-</span> mA</strong></p></div>
                <div><p>허용 한계: <br><strong><span id="res-i-limit">-</span> mA</strong></p><p>현재 전력: <br><strong><span id="res-p-calc">-</span> W</strong></p></div>
            </div>
            <div id="res-status" class="status-tag">상태: -</div>
        </div>
        <button id="reset-res" class="danger-btn">초기화</button>
    </div>

    <!-- 3. 보간법 계산기 -->
    <div id="interpolation-calc" class="container" style="display: none;">
        <div class="nav-header"><button class="back-btn" onclick="showHub()">← 메인으로 돌아가기</button></div>
        <h1>보간법 (Interpolation)</h1>
        <div class="formula-display">
            $$ cfx = \frac{(fx - f_1) \times (cf_2 - cf_1)}{f_2 - f_1} + cf_1 $$
        </div>
        <div class="calculator-grid">
            <div class="input-group"><label>f1 (X1)</label><input type="number" id="int-f1" step="any"></div>
            <div class="input-group"><label>cf1 (Y1)</label><input type="number" id="int-cf1" step="any"></div>
            <div class="input-group"><label>f2 (X2)</label><input type="number" id="int-f2" step="any"></div>
            <div class="input-group"><label>cf2 (Y2)</label><input type="number" id="int-cf2" step="any"></div>
            <div class="input-group"><label>fx (Target X)</label><input type="number" id="int-fx" step="any"></div>
        </div>
        <div class="result-box"><h3>결과 (cfx): <span id="int-result">-</span></h3></div>
        <div class="graph-container">
            <canvas id="interpolation-graph" width="600" height="300"></canvas>
        </div>
        <button id="reset-int" class="danger-btn">초기화</button>
    </div>

    <!-- 4. dB 계산기 -->
    <div id="db-calc" class="container" style="display: none;">
        <div class="nav-header"><button class="back-btn" onclick="showHub()">← 메인으로 돌아가기</button></div>
        <h1>dB 계산기 (Gain/Loss)</h1>
        
        <div class="resistor-section">
            <h3>전압비 (Voltage Ratio)</h3>
            <div class="formula-display">$$ dB = 20 \times \log_{10} \left( \frac{V_{out}}{V_{in}} \right) $$</div>
            <div class="calculator-grid">
                <div class="input-group"><label>V_out (출력 전압)</label><input type="number" id="db-vout" step="any"></div>
                <div class="input-group"><label>V_in (입력 전압)</label><input type="number" id="db-vin" step="any"></div>
            </div>
            <div class="result-box"><h3>결과: <span id="db-v-result">-</span> dB</h3></div>
        </div>

        <div class="resistor-section">
            <h3>전력비 (Power Ratio)</h3>
            <div class="formula-display">$$ dB = 10 \times \log_{10} \left( \frac{P_{out}}{P_{in}} \right) $$</div>
            <div class="calculator-grid">
                <div class="input-group"><label>P_out (출력 전력)</label><input type="number" id="db-pout" step="any"></div>
                <div class="input-group"><label>P_in (입력 전력)</label><input type="number" id="db-pin" step="any"></div>
            </div>
            <div class="result-box"><h3>결과: <span id="db-p-result">-</span> dB</h3></div>
        </div>
        <button id="reset-db" class="danger-btn">초기화</button>
    </div>

    <!-- 5. 오차율 계산기 -->
    <div id="error-calc" class="container" style="display: none;">
        <div class="nav-header"><button class="back-btn" onclick="showHub()">← 메인으로 돌아가기</button></div>
        <h1>오차율 계산기</h1>
        <div class="formula-display">
            $$ Error(\%) = \frac{M - T}{T} \times 100 $$
        </div>
        <div class="calculator-grid">
            <div class="input-group"><label>T (참값)</label><input type="number" id="err-t" step="any"></div>
            <div class="input-group"><label>M (측정값)</label><input type="number" id="err-m" step="any"></div>
        </div>
        <div class="result-box"><h3>오차율: <span id="err-result">-</span> %</h3></div>
        <button id="reset-err" class="danger-btn">초기화</button>
    </div>

    <!-- 6. TSL 체크 -->
    <div id="tsl-calc" class="container" style="display: none;">
        <div class="nav-header"><button class="back-btn" onclick="showHub()">← 메인으로 돌아가기</button></div>
        <h1>TSL 체크</h1>
        <div class="formula-display">
            $$ TS \le TSL $$
        </div>
        <div class="calculator-grid">
            <div class="input-group">
                <label>P</label>
                <div style="display: flex; gap: 5px;">
                    <input type="number" id="tsl-p" step="any" style="flex: 1;">
                    <select id="tsl-p-unit"><option value="1e-9">nano (n)</option><option value="1e-6">micro (μ)</option><option value="1" selected>Unit</option></select>
                </div>
            </div>
            <div class="input-group">
                <label>W</label>
                <div style="display: flex; gap: 5px;">
                    <input type="number" id="tsl-w" step="any" style="flex: 1;">
                    <select id="tsl-w-unit"><option value="1e-9">nano (n)</option><option value="1e-6">micro (μ)</option><option value="1" selected>Unit</option></select>
                </div>
            </div>
        </div>
        <div class="result-box" id="tsl-box">
            <p>TS: <span id="tsl-ts">-</span></p>
            <p>TSL 한계치: <span id="tsl-limit">-</span></p>
            <div id="tsl-status" class="status-tag">결과: -</div>
        </div>
        <button id="reset-tsl" class="danger-btn">초기화</button>
    </div>

    <script src="main.js"></script>
</body>
</html>
